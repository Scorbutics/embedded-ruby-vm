# Kotlin/Native cinterop definition for Ruby VM
# This file tells K/N which C headers to use and how to link the library

package = com.scorbutics.rubyvm.native

# C headers to expose to Kotlin
headers = completion-task.h log-listener.h ruby-interpreter.h ruby-script.h ruby-vm.h

# Filter which headers are processed (include dependencies needed by public API)
# Note: completion-task.h and log-listener.h are required by ruby-interpreter.h
headerFilter = ruby-interpreter.h ruby-script.h completion-task.h log-listener.h

# Compiler options for finding headers
# NOTE: Include paths are configured in build.gradle.kts via includeDirs.headerFilterOnly()
# This ensures absolute paths are used and avoids path resolution issues

# Note: Linker options are configured in build.gradle.kts with absolute paths
# This ensures reliable linking across different build environments

# Exclude internal implementation details
excludedFunctions = ruby_vm_main_thread_func ruby_vm_log_reader_thread_func ruby_vm_script_thread_func
